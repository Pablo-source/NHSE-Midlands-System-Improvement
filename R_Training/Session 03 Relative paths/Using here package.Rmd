---
title: "Projects and here() package in R"
output:
  html_document:
    df_print: paged
---

This notebook will focus on the use of the [Here package](https://here.r-lib.org/) package.

**Aim**

THe goal of the here package is to enable easy file referencing in project-oriented workflows. In contrast to using setwd(), which is fragile and dependent on the way you organize your files.

The aim of *here* is to *use the top-level directory of a project* to easy **build paths to files**.

**Installation**

As always, we first install the package and then we load it. Note that in this R chunck below, I am displayin the R script but not running it. Include eval=FALSE in the R chunck parameters setup to show your R script but not executing it. 

```{r install and load package}
# install.packages("here")
library(here)
```

The output of the here() function returns where our project is pointing to

```{r here function content}
here_content <-here()
here_content

```
**Advantages of using here package**

The Advantage of working with here() package alongside with Projects in R, implies that you always open a fresh instance of RStudio when working in a project.  We should avoid using **rm(list= ls())** at the estart of any R script, because it does not create a fresh R start. It only deletes any user-created objects from the global workspace.

Three main reasons to work with projects and using here() package: 

- Organise each projects into folders on your computer
- Use the here() function to build the path when you want to read or write a file.
- Use here() function to create relative paths to the top-level diretory (defined by your Project directory)

Also remember not to save .RData as a default option in R Studio when you quit R, and also don't load .RData when you start your R Session. It is advisable to disable that option int Global Options menu.

**Using here() package to read and write files**

Let here() package to build the path fo  your input file when loading data. We only have to specify the directory containing our input data and the .csv file we want to read into R.

```{r Load in data,echo=TRUE}
df <- read.delim(here("data","Input_data.csv"), sep =",")
head(df)
```
We can perform several data manipulations on this file and save it back to the data folder using again the here function
```{r Read and write data,echo=TRUE}
library(dplyr)

df_new <- df %>% 
          mutate(New_metric = Metric_value * 1.5)
df_new

```
Again, we make use of the previous function for here() to write the relative path for us 

```{r write output, echo=TRUE}
write.csv(df_new, here("data", "Output_results.csv"), row.names = TRUE  )
```

```{r describe path,echo=TRUE}
# Create folder for data analysis
data_path <- here("data")
data_path
```



**Situation Report**

The dr_here() function explains the reasoning behind choosing the project root:
```{r newfunction, echo=TRUE}
dr_here()
```

This demonstrates we have an easy way using dr_here() function that our filepaths are mapped wto the right folder.

**Standard Procedure**  

It is a good R coding practice to include here() function when reading and writing files within your project folder. This allows  multiple developers working on the same project to point their R scripts to the same shared input and output folders. 
